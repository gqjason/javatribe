>æ·±å¤œ:æˆ‘äº†ä¸èµ· æ¸…æ™¨:æˆ‘èµ·ä¸äº†

# æ¯æ—¥ä¸¤é¢˜
---


# ä¸€ã€åŸºç¡€é¢˜
### é¢˜ç›®ï¼š[P1022 [NOIP 2000 æ™®åŠç»„] è®¡ç®—å™¨çš„æ”¹è‰¯](https://www.luogu.com.cn/problem/P1022)

### æ€è·¯ï¼š
æ¯”è¾ƒå¤æ‚çš„æ¨¡æ‹Ÿé¢˜ã€‚æ³¨æ„ç»†èŠ‚å³å¯ã€‚
### ä»£ç (c++)ï¼š
æ—¶é—´å¤æ‚åº¦ **O($len(s)$)**ï¼Œ`s`ä¸ºè¾“å…¥çš„å­—ç¬¦ä¸²ã€‚

```cpp
#include <iostream>
#include <iomanip>
#include <string>
using namespace std;

// æŠŠå·²è¯»å–çš„çº¯æ•°å­—å¹¶å…¥å¸¸æ•°é¡¹ï¼ˆç»Ÿä¸€æ”¾åˆ°ç­‰å·å·¦ä¾§ï¼‰
inline void Flush(long long &constant, long long &num, int side, int sign, bool &hasNum) {
    if (hasNum) {
        constant += side * sign * num;
    }
    num = 0;
    hasNum = false;
}

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    string s;
    if (!(cin >> s)) return 0;

    long long coeff = 0;    // æœªçŸ¥æ•°ç³»æ•°ç´¯åŠ 
    long long constant = 0; // å¸¸æ•°é¡¹ï¼ˆç§»åˆ°ç­‰å·å·¦ä¾§ï¼‰
    long long num = 0;      // å½“å‰ç´¯ç§¯æ•°å­—
    int sign = 1;           // å½“å‰é¡¹ç¬¦å·
    int side = 1;           // å·¦è¾¹ï¼š+1ï¼›å³è¾¹ï¼š-1
    bool hasNum = false;    // æ˜¯å¦å·²æœ‰æ•°å­—
    char var = 0;           // æœªçŸ¥æ•°å

    for (char c : s) {
        if (c == '+') {
            Flush(constant, num, side, sign, hasNum);
            sign = 1;
        } else if (c == '-') {
            Flush(constant, num, side, sign, hasNum);
            sign = -1;
        } else if (c == '=') {
            Flush(constant, num, side, sign, hasNum);
            sign = 1;
            side = -1;
        } else if (c >= '0' && c <= '9') {
            num = num * 10 + (c - '0');
            hasNum = true;
        } else if ((c >= 'a' && c <= 'z') || (c >= 'A' && c <= 'Z')) {
            var = c;
            long long k = hasNum ? num : 1;
            coeff += side * sign * k;
            num = 0;
            hasNum = false;
        }
    }
    Flush(constant, num, side, sign, hasNum);

    // coeff * var + constant = 0
    double ans = -static_cast<double>(constant) / static_cast<double>(coeff);
    if (ans == -0.0) ans = 0.0;

    cout << var << '=' << fixed << setprecision(3) << ans;
    return 0;
}
```

# äºŒã€æé«˜é¢˜
### é¢˜ç›®ï¼š[P8620 [è“æ¡¥æ¯ 2014 å›½ A] æ’åˆ—åºæ•°](https://www.luogu.com.cn/problem/P8620)

### æ€è·¯ï¼š
(ç»å…¸çš„è“æ¡¥æ¯æš´åŠ›é¢˜ï¼Œæš´åŠ›å³å¯ï¼Œé¢˜è§£ç»“æŸã€bushiã€‘ğŸ¤£ğŸ¤£ğŸ¤£)
ç»å…¸çš„åº·æ‰˜å±•å¼€é¢˜ã€‚
åº·æ‰˜å±•å¼€ç”¨äºè®¡ç®—ä¸€ä¸ªæ’åˆ—åœ¨æ‰€æœ‰æ’åˆ—ä¸­çš„å­—å…¸åºæ’åã€‚å¯¹äºä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„æ’åˆ—ï¼Œä»å·¦åˆ°å³ä¾æ¬¡ç¡®å®šæ¯ä¸€ä½ï¼Œç»Ÿè®¡å½“å‰ä½å·¦ä¾§æœªå‡ºç°ä¸”æ¯”å½“å‰å­—ç¬¦å°çš„å­—ç¬¦ä¸ªæ•° $cnt$ï¼Œåˆ™è¯¥ä½å¯¹æ’åçš„è´¡çŒ®ä¸º $cnt \times (n-i-1)!$ã€‚å°†æ‰€æœ‰ä½çš„è´¡çŒ®ç´¯åŠ å³ä¸ºè¯¥æ’åˆ—çš„åºæ•°ï¼ˆä» $0$ å¼€å§‹è®¡æ•°ï¼‰ã€‚

æœ¬é¢˜ç›´æ¥æŒ‰ç…§åº·æ‰˜å±•å¼€å…¬å¼æ¨¡æ‹Ÿå³å¯ï¼Œæ³¨æ„æ¯æ¬¡è¦ç»´æŠ¤å·²å‡ºç°çš„å­—ç¬¦é›†åˆã€‚

**ä¸‰å€ç»éªŒ**ï¼š[[åŠ›æ‰£]31. ä¸‹ä¸€ä¸ªæ’åˆ—](https://leetcode.cn/problems/next-permutation/description/)
**å››å€ç»éªŒ**ï¼š[[åŠ›æ‰£]60. æ’åˆ—åºåˆ—](https://leetcode.cn/problems/permutation-sequence/description/)
**äº”å€ç»éªŒ**ï¼š[P5367 ã€æ¨¡æ¿ã€‘åº·æ‰˜å±•å¼€](https://www.luogu.com.cn/problem/P5367)

å¯èƒ½éœ€è¦çš„çŸ¥è¯†ï¼š
- åº·æ‰˜å±•å¼€ï¼š
å­¦ä¹ ç½‘ç«™ï¼š[ç»´åŸºç™¾ç§‘](https://zh.wikipedia.org/wiki/%E5%BA%B7%E6%89%98%E5%B1%95%E5%BC%80)ï¼ŒBç«™ï¼š[ç®—æ³•è®²è§£146ã€æ‰©å±•ã€‘åº·æ‰˜å±•å¼€ã€çº¦ç‘Ÿå¤«ç¯ã€å®Œç¾æ´—ç‰Œã€å·¦ç¨‹äº‘ã€‘](https://www.bilibili.com/video/BV1Dz2eYTE7T/?spm_id_from=333.337.search-card.all.click)

### ä»£ç (c++)ï¼š
æ—¶é—´å¤æ‚åº¦ **O($n^2$)**ï¼Œå…¶ä¸­`n`ä¸ºå­—ç¬¦ä¸²é•¿åº¦ã€‚

```cpp
#include <bits/stdc++.h>
using namespace std;

typedef long long ll;

ll fact[20];

// é¢„å¤„ç†é˜¶ä¹˜
void pre() {
    fact[0] = 1;
    for (int i = 1; i < 12; ++i) {
        fact[i] = fact[i - 1] * i;
    }
}

void solve() {
    pre();
    string s;
    cin >> s;

    int len = s.length();
    vector<char> used;
    ll ans = 0;

    for (int i = 0; i < len; ++i) {
        // äºŒåˆ†æŸ¥æ‰¾æ¯”å½“å‰å­—ç¬¦å°ä¸”å·²å‡ºç°è¿‡çš„å­—ç¬¦ä¸ªæ•°
        int idx = upper_bound(used.begin(), used.end(), s[i]) - used.begin();

        int cnt = (s[i] - 'a' - idx);//æ¯”å½“å‰å­—ç¬¦å°ä¸”æœªå‡ºç°è¿‡çš„å­—ç¬¦ä¸ªæ•°
        ans += cnt * fact[len - i - 1];

        used.insert(used.begin() + idx, s[i]);//æŠŠå­—ç¬¦æ’å…¥usedæ•°ç»„
    }
    cout << ans << '\n';
}

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);
    solve();
    return 0;
}
```

